{"version":3,"sources":["webpack:///F:/软件资源/文件/前端/练习/weichat-project/ZH购物/common/mysettle.vue?17a8","webpack:///F:/软件资源/文件/前端/练习/weichat-project/ZH购物/common/mysettle.vue?45ca","webpack:///F:/软件资源/文件/前端/练习/weichat-project/ZH购物/common/mysettle.vue?d9d5","uni-app:///common/mysettle.vue","webpack:///F:/软件资源/文件/前端/练习/weichat-project/ZH购物/common/mysettle.vue?f3c3","webpack:///F:/软件资源/文件/前端/练习/weichat-project/ZH购物/common/mysettle.vue?49e4","webpack:///F:/软件资源/文件/前端/练习/weichat-project/ZH购物/common/mysettle.vue?260d"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAopB,CAAgB,yqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmBxqB,gD;AACA;AACA;AACA,kFADA;;AAGA,6CAHA;;AAKA,0CALA;AAMA,yCANA;;AAQA;AACA,eATA,yBASA;AACA;AACA,KAXA,GADA;;AAcA,MAdA,kBAcA;AACA;AACA,GAhBA;AAiBA,QAjBA,oBAiBA;;AAEA,GAnBA;AAoBA;;AAEA,4DAFA;AAGA;AACA,kBAJA,4BAIA;AACA;AACA;AACA;AACA,KARA;AASA;AACA,cAVA,wBAUA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KApBA;AAqBA;AACA,YAtBA,sBAsBA;AACA;AACA;AACA,sBAHA,GAGA,EAHA;AAIA;AACA;AACA;AACA;AACA,iBAJA;;AAMA,qBAVA,GAUA,CAVA;AAWA;AACA;AACA,iBAFA;;AAIA,yBAfA,GAeA;AACA;AACA;AACA;AACA,+CAJA;AAKA,8CALA;AAMA;AACA,+BAPA,EAfA;;;AAyBA;AACA;AACA,qDADA;;;AAIA,kBA9BA,GA8BA,mBA9BA;AA+BA;AACA;AACA;AACA;AACA,mBAHA;AAIA,iBALA,EA/BA;AAqCA,KA3DA,GApBA,E;;;;;;;;;;;;;ACpBA;AAAA;AAAA;AAAA;AAA8rC,CAAgB,+pCAAG,EAAC,C;;;;;;;;;;;ACAltC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF","file":"common/mysettle.js","sourcesContent":["export * from \"-!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mysettle.vue?vue&type=template&id=7b9b5efd&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mysettle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mysettle.vue?vue&type=script&lang=js&\"","<template>\n  <!-- 最外层的容器 -->\n  <view class=\"my-settle-container\">\n    <!-- 全选区域 -->\n    <label class=\"radio\" @click=\"changeAllState\">\n      <radio color=\"#C00000\" :checked=\"isFullCheck\" /><text>全选</text>\n    </label>\n\n    <!-- 合计区域 -->\n    <view class=\"amount-box\">\n      合计:<text class=\"amount\">￥{{ checkedGoodsAmount }}</text>\n    </view>\n\n    <!-- 结算按钮 -->\n    <view class=\"btn-settle\" @click=\"settlement\">加入到订单({{ checkedCount }})</view>\n  </view>\n</template>\n\n<script>\nimport { mapGetters, mapMutations, mapState } from \"vuex\";\nexport default {\n  computed: {\n    ...mapGetters(\"mycart\", [\"total\", \"checkedCount\", \"checkedGoodsAmount\"]),\n    // addstr 是详细的收货地址\n    ...mapGetters(\"myuser\", [\"addstr\"]),\n    // token 是用户登录成功之后的 token 字符串\n    ...mapState(\"myuser\", [\"token\"]),\r\n    ...mapState(\"mycart\", [\"cart\"]),\r\n\t\t\n    // 2. 是否全选\n    isFullCheck() {\n      return this.total === this.checkedCount;\n    },\n  },\n  data() {\n    return {};\n  },\r\n\tonLoad(){\r\n\r\n\t},\n  methods: {\n    // 2. 使用 mapMutations 辅助函数，把 mycart 模块提供的 updateAllGoodsState 方法映射到当前组件中使用\n    ...mapMutations(\"mycart\", [\"updateAllGoodsState\"]),\n    // label 的点击事件处理函数\n    changeAllState() {\n      // 修改购物车中所有商品的选中状态\n      // !this.isFullCheck 表示：当前全选按钮的状态取反之后，就是最新的勾选状态\n      this.updateAllGoodsState(!this.isFullCheck);\n    },\n    // 点击了结算按钮\n    settlement() {\n      // 1. 先判断是否勾选了要结算的商品\n      if (!this.checkedCount) return uni.$showMsg(\"请选择要结算的商品！\");\n      // 2. 再判断用户是否选择了收货地址\n      if (!this.addstr) return uni.$showMsg(\"请选择收货地址！\");\n\n      // 3. 最后判断用户是否登录了\n      if (!this.token) return uni.$showMsg(\"请先登录！\");\r\n\t\t\t// 4. 加入到订单\n\t\t\tthis.payOrder();\t\t\n    },\r\n// 加入到订单\nasync payOrder() {\n  // 1. 创建订单\n  // 1.1 组织订单的信息对象\r\n\tlet goods2=[];\r\n\tthis.cart.forEach((item)=>{\r\n\t\tif(item.goods_state===true){\r\n\t\t\tgoods2.push(item)\r\n\t\t}\r\n\t}\r\n\t);\r\n\tlet price=0;\r\n\tgoods2.forEach((item)=>{\r\n\t\tprice+=parseInt(item.goods_price)*parseInt(item.goods_count)\r\n\t})\r\n\t\n  const orderInfo = {\n    // 开发期间，注释掉真实的订单价格，\n    // order_price: this.checkedGoodsAmount,\n    // 写死订单总价为 1 分钱\n    order_price: price.toFixed(2),\n    consignee_addr: this.addstr,\n    // goods: this.cart.filter(x => x.goods_state===true).map(x => ({ goods_id: x.goods_id, goods_number: x.goods_count, goods_price: x.goods_price }))\r\n\t\tgoods: goods2\r\n\t\t\n  }\n  // 1.2 发起请求创建订单,向云开发服务器中插入订单信息\r\n\t\twx.cloud.init({\r\n\t\t\tenv:\"web2010dean-6gzr9t1a190f533d\"\r\n\t\t});\r\n\t\n\t\tconst db = wx.cloud.database();\r\n\t\tdb.collection('weixin-order').add({data:orderInfo}).then(res=>{\r\n\t\t\tdb.collection('weixin-order').get().then(res=>{\r\n\t\t\tconsole.log(res);\r\n\t\t\tuni.$showMsg('加入订单成功')\r\n\t\t\t})\r\n\t\t})\n\t\t}\t\t\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.my-settle-container {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 50px;\n  // 将背景色从 cyan 改为 white\n  background-color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 5px;\n  font-size: 14px;\n\n  .radio {\n    display: flex;\n    align-items: center;\n  }\n\n  .amount {\n    color: #c00000;\n  }\n\n  .btn-settle {\n    height: 50px;\n    min-width: 100px;\n    background-color: #c00000;\n    color: white;\n    line-height: 50px;\n    text-align: center;\n    padding: 0 10px;\n  }\n}\n</style>\n","import mod from \"-!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mysettle.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mysettle.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1616913453558\n      var cssReload = require(\"E:/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { render, staticRenderFns, recyclableRender, components } from \"./mysettle.vue?vue&type=template&id=7b9b5efd&\"\nvar renderjs\nimport script from \"./mysettle.vue?vue&type=script&lang=js&\"\nexport * from \"./mysettle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mysettle.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"common/mysettle.vue\"\nexport default component.exports"],"sourceRoot":""}